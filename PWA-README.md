# Pilgrim Notes - SolidJS PWA

A spiritual journaling Progressive Web App (PWA) for BahÃ¡'Ã­ pilgrims visiting holy sites in Haifa and 'AkkÃ¡. Converted from React Native to SolidJS with Tailwind CSS 4.

## ğŸ¯ Overview

Pilgrim Notes allows pilgrims to create and organize:
- **Text notes** with rich text formatting
- **Audio recordings** of reflections and prayers
- **Photos** of holy sites and experiences
- **PDF journals** combining all notes for printing and sharing

All data is stored locally using IndexedDB, ensuring privacy and offline functionality.

## âœ¨ Features

### Core Functionality
- âœ… **58 Holy Sites** - Pre-loaded information about sacred locations
- âœ… **Rich Text Editor** - Format notes with headings, lists, blockquotes, and more
- âœ… **Audio Recording** - Record reflections with MediaRecorder API (up to 30 minutes)
- âœ… **Photo Capture** - Take photos with camera or choose from gallery
- âœ… **PDF Export** - Generate beautiful journals with all notes and photos
- âœ… **Search & Filter** - Find notes by title, site, or content
- âœ… **Offline-First** - All data stored locally, works without internet
- âœ… **Installable PWA** - Add to home screen on mobile/desktop

### Technical Features
- âš¡ **Fast & Lightweight** - Built with SolidJS for optimal performance
- ğŸ¨ **Modern UI** - Styled with Tailwind CSS 4
- ğŸ“¦ **IndexedDB Storage** - Efficient storage for notes and media
- ğŸ”’ **Privacy-Focused** - No server, no tracking, all data stays on device
- ğŸ“± **Responsive Design** - Works beautifully on mobile, tablet, and desktop
- ğŸŒ **Web APIs** - Camera, Microphone, Web Share, Clipboard

## ğŸš€ Getting Started

### Prerequisites
- Node.js 18+
- npm or yarn

### Installation

```bash
# Install dependencies
npm install

# Run development server
npm run dev

# Build for production
npm run build

# Preview production build
npm run preview
```

### Development

The app will be available at `http://localhost:5173`

## ğŸ“ Project Structure

```
src/
â”œâ”€â”€ components/         # Reusable UI components
â”‚   â”œâ”€â”€ icons/         # 25 SVG icon components
â”‚   â”œâ”€â”€ Button.tsx     # Button component with variants
â”‚   â”œâ”€â”€ Card.tsx       # Card component for notes/sites
â”‚   â”œâ”€â”€ Input.tsx      # Text input with validation
â”‚   â”œâ”€â”€ Modal.tsx      # Modal/dialog component
â”‚   â”œâ”€â”€ SearchBar.tsx  # Search input with clear button
â”‚   â”œâ”€â”€ Fab.tsx        # Floating action button
â”‚   â”œâ”€â”€ CameraCapture.tsx     # Camera interface
â”‚   â”œâ”€â”€ PhotoPicker.tsx       # Gallery picker
â”‚   â”œâ”€â”€ AudioRecorder.tsx     # Audio recording interface
â”‚   â””â”€â”€ MediaSaveHandler.tsx  # Media storage utilities
â”œâ”€â”€ views/             # Main application views
â”‚   â”œâ”€â”€ NotesList.tsx  # Home screen with notes/sites toggle
â”‚   â”œâ”€â”€ Sites.tsx      # Grid of all holy sites
â”‚   â”œâ”€â”€ SitePage.tsx   # Individual site details
â”‚   â”œâ”€â”€ Editor.tsx     # Rich text note editor
â”‚   â”œâ”€â”€ NoteView.tsx   # View/edit text notes
â”‚   â”œâ”€â”€ AudioView.tsx  # Audio playback
â”‚   â”œâ”€â”€ ImageView.tsx  # Photo viewing
â”‚   â””â”€â”€ Print.tsx      # PDF export interface
â”œâ”€â”€ stores/            # State management
â”‚   â”œâ”€â”€ navigationStore.ts  # View stack navigation
â”‚   â””â”€â”€ uiStore.ts          # UI state (menu, keyboard)
â”œâ”€â”€ lib/               # Core utilities
â”‚   â””â”€â”€ db.ts          # IndexedDB operations
â”œâ”€â”€ data/              # Static data
â”‚   â””â”€â”€ sites.ts       # 58 holy sites data
â”œâ”€â”€ types/             # TypeScript types
â”‚   â””â”€â”€ index.ts       # Note, Site, and other interfaces
â”œâ”€â”€ utils/             # Helper functions
â”‚   â”œâ”€â”€ date.ts        # Date formatting
â”‚   â”œâ”€â”€ debounce.ts    # Debounce utility
â”‚   â””â”€â”€ pdfHelpers.ts  # PDF generation helpers
â”œâ”€â”€ App.tsx            # Root component
â”œâ”€â”€ index.tsx          # Application entry point
â””â”€â”€ index.css          # Global styles
```

## ğŸ¨ Design System

### Colors
- **Primary:** `#015D7C` (Dark Teal)
- **Secondary:** `#DCF1FA` (Light Blue)
- **Background:** `#024359` (Dark Blue)

### Fonts
- **Body:** Comic Neue (via Google Fonts)
- **Handwriting:** Caveat (via Google Fonts)

## ğŸ“± PWA Features

### Service Worker
Automatically generated by `vite-plugin-pwa` with:
- Offline caching of all app assets
- Runtime caching for external resources
- Auto-update on new versions

### Manifest
- App name: "Pilgrim Notes"
- Theme color: #015D7C
- Display: standalone
- Orientation: portrait
- Icons: 192x192, 512x512 (with maskable support)

### Installation
Users can install the app:
- **iOS Safari:** Share â†’ Add to Home Screen
- **Android Chrome:** Menu â†’ Install App
- **Desktop:** Address bar â†’ Install icon

## ğŸ—„ï¸ Data Storage

### IndexedDB Structure

**Database:** `pilgrim-notes-db`

**Stores:**
1. `textNotes` - Text notes with HTML content
2. `audioNotes` - Audio note metadata
3. `imageNotes` - Image note metadata
4. `mediaBlobs` - Binary data (audio files, images)

**Note Structure:**
```typescript
{
  id: string;              // UUID
  title: string;           // Note title
  body/uri: string;        // Content or media URL
  site: string;            // Associated holy site
  type: 'text' | 'audio' | 'image';
  created: string;         // ISO date
  easyCreatedTime: string; // MM/DD/YYYY format
}
```

## ğŸš¢ Deployment

### Static Hosting (Recommended)

The app is a static site and can be deployed to any static hosting service:

#### Netlify
```bash
npm run build
# Deploy dist/ folder to Netlify
```

#### Vercel
```bash
npm run build
# Deploy dist/ folder to Vercel
```

#### GitHub Pages
```bash
npm run build
# Push dist/ folder to gh-pages branch
```

#### Firebase Hosting
```bash
npm run build
firebase deploy
```

### Configuration for SPA

Add a redirect rule to handle client-side routing:

**Netlify (_redirects file in public/):**
```
/*    /index.html   200
```

**Vercel (vercel.json):**
```json
{
  "rewrites": [{ "source": "/(.*)", "destination": "/index.html" }]
}
```

## ğŸ”§ Key Technologies

- **SolidJS 1.8.22** - Reactive UI framework
- **Vite 5.4.8** - Build tool and dev server
- **Tailwind CSS 4.0** - Utility-first CSS framework
- **IndexedDB (idb 8.0.0)** - Client-side storage
- **jsPDF 2.5.2** - PDF generation
- **solid-toast 0.5.0** - Toast notifications
- **vite-plugin-pwa 0.20.5** - PWA support

## ğŸ¯ Conversion Highlights

### From React Native to SolidJS

| React Native | SolidJS PWA |
|--------------|-------------|
| AsyncStorage | IndexedDB (idb) |
| React Context | SolidJS Signals & Stores |
| NativeBase UI | Tailwind CSS 4 + Custom Components |
| expo-av (Audio) | MediaRecorder API |
| expo-image-picker | getUserMedia API |
| expo-file-system | Blob URLs + IndexedDB |
| expo-print | jsPDF |
| React Navigation | Custom View Stack |
| react-native-svg | Web SVG elements |

### Performance Improvements
- **Fine-grained reactivity** - Only re-render what changes
- **No virtual DOM** - Direct DOM updates
- **Smaller bundle** - ~80KB vs 200KB+ for React
- **Faster startup** - Native web APIs vs bridge overhead

## ğŸ“– Usage Guide

### Creating Notes

1. **Text Note:**
   - Click "+" button or choose site â†’ "Text Note"
   - Enter title and select site
   - Use formatting toolbar for rich text
   - Auto-saves after 10 seconds of typing

2. **Audio Note:**
   - Choose site â†’ "Record Audio" button
   - Grant microphone permission
   - Record (up to 30 minutes)
   - Preview and confirm

3. **Photo Note:**
   - Choose site â†’ "Take Photo" button
   - Grant camera permission
   - Capture or choose from gallery
   - Add title

### Searching Notes
- Use search bar on home screen
- Searches titles, content, and site names
- Filter by note type (text, audio, image)

### Exporting Journal
1. Open menu â†’ "Export Journal"
2. Choose export options:
   - Include site information
   - Include images (increases file size)
   - Include table of contents
   - Include timestamps
3. Click "Generate PDF Journal"
4. Download, share, or print

### Managing Notes
- **Edit:** Click note â†’ Edit button
- **Delete:** Click note â†’ Delete button (with confirmation)
- **Share:** Photos can be shared via Web Share API

## ğŸ› Troubleshooting

### Camera/Microphone Not Working
- Ensure HTTPS (required for getUserMedia)
- Check browser permissions
- Try different browser (Chrome/Safari recommended)

### Notes Not Saving
- Check browser storage quota
- Clear old data if storage full
- Ensure IndexedDB not disabled

### PWA Not Installing
- Must be served over HTTPS
- Check manifest.json is accessible
- Try different browser
- Clear cache and retry

### Images Too Large
- Photos captured at 90% JPEG quality
- Consider resizing before importing
- Storage limit: ~50MB typical per origin

## ğŸ¤ Contributing

This project is a conversion from React Native to SolidJS PWA. Future enhancements:

- [ ] Sync across devices (optional cloud backup)
- [ ] Audio transcription
- [ ] Multiple languages
- [ ] Dark mode
- [ ] Custom site additions
- [ ] Export to other formats (EPUB, DOCX)

## ğŸ“„ License

This project maintains the same license as the original React Native app.

## ğŸ™ Acknowledgments

- Original React Native app by the Pilgrim Notes team
- Site information and quotes from BahÃ¡'Ã­ World Centre
- Images from [pilgrim-images repository](https://github.com/Lastofthefirst/pilgrim-images)
- BahÃ¡'Ã­ community for spiritual guidance

## ğŸ“ Support

For issues or questions:
1. Check the troubleshooting section above
2. Review browser console for errors
3. Ensure using HTTPS for PWA features
4. Try clearing browser cache and data

---

**Built with ğŸ’™ for the BahÃ¡'Ã­ pilgrimage experience**

*"The first duty prescribed by God for His servants is the recognition of Him Who is the Dayspring of His Revelation..."* - BahÃ¡'u'llÃ¡h
